(this.webpackJsonpnoteful=this.webpackJsonpnoteful||[]).push([[0],{23:function(e,t,n){e.exports=n(42)},28:function(e,t,n){},29:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),l=n.n(o),c=(n(28),n(14)),u=n(3),i=n(4),d=n(6),m=n(5),s=n(1),f=(n(29),n(7)),h=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"header-container"},r.a.createElement(f.b,{className:"header-link",to:"/"},r.a.createElement("h1",null,"Noteful")))}}]),n}(r.a.Component),v=r.a.createContext({notes:[],folders:[],addNote:function(){},deleteNote:function(){}}),p=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(v.Consumer,null,(function(e){return r.a.createElement("div",null,r.a.createElement("ul",{className:"folder-list"},r.a.createElement("h3",null,"Folders"),function(e){if(e)return e.folders.map((function(e,t){return r.a.createElement(f.c,{key:t,to:"/folder/".concat(e.id),className:"folder-box"},r.a.createElement("h3",null,e.name))}))}(e)),r.a.createElement(f.b,{to:"/addfolder"},r.a.createElement("button",null,"Add Folder")))}))}}]),n}(r.a.Component),E=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=function(e){return e.notes.map((function(t,n){var a=new Date(t.modified);return r.a.createElement("div",{className:"note-link",key:t.id},r.a.createElement(f.b,{key:n,to:"notes/".concat(t.id),className:"note-link-embed"},r.a.createElement("div",null,t.name),r.a.createElement("div",null,"Modified ",a.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e.deleteNote(t.id)}},"Delete")))}))};return r.a.createElement(v.Consumer,null,(function(t){return r.a.createElement("div",null,r.a.createElement("h2",null,"Notes"),r.a.createElement("ul",{className:"note-list"},e(t),e(t).length?"":r.a.createElement("p",null,"'Make sure you have the server up'")),r.a.createElement(f.b,{to:"/addnote"},r.a.createElement("button",null,"Add Note")))}))}}]),n}(r.a.Component),b=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(v.Consumer,null,(function(t){var n=t.notes.find((function(t){return parseInt(t.id)===parseInt(e.props.match.params.note_id)}))||{},a=t.folders.find((function(e){return n.folderid===e.id}))||{},o=new Date(n.modified);return r.a.createElement("div",{className:"a-note"},n.name&&r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,n.name),r.a.createElement("h6",null,"In file ",a.name),r.a.createElement("button",{onClick:function(){return t.deleteNote(n.id,e.props.match.params)}},"Delete Note")),r.a.createElement("h6",null,"Modified ",o.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),r.a.createElement("p",null,n.content)))}))}}]),n}(r.a.Component);var y=function(e){return r.a.createElement("button",{onClick:function(){return e.history.goBack()}},r.a.createElement("div",{className:"go-back-button"},"<"))},j=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=function(t){return t.notes.filter((function(t){return parseInt(t.folderid)===parseInt(e.props.match.params.folder_id)}))};return r.a.createElement(v.Consumer,null,(function(n){return console.log(t(n)),r.a.createElement("div",null,r.a.createElement("h2",null,function(t){return(t.folders.find((function(t){return parseInt(t.id)===parseInt(e.props.match.params.folder_id)}))||{}).name}(n)),r.a.createElement("div",{className:"note-list"},function(e){return e.map((function(e,t){return r.a.createElement(f.b,{key:t,to:"/notes/".concat(e.id),className:"note-link-embed"},r.a.createElement("div",{className:"note-link",key:e.id},e.name))}))}(t(n))))}))}}]),n}(r.a.Component),N=n(13),O=n.n(N);var g=function(e){return e.error?r.a.createElement("div",{className:"error"},e.error):r.a.createElement(r.a.Fragment,null)},k={method:"POST",headers:{"Content-Type":"application/json"},body:{}},C=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleFolderInputChange=function(e){a.setState({name:{value:e,touched:!0}})},a.state={name:{value:"",touched:!1}},a}return Object(i.a)(n,[{key:"validateName",value:function(){var e=this.state.name.value.trim();return 0===e.length?"Name is required":e.length<3?"Name must be at least 3 characters":void 0}},{key:"render",value:function(){var e=this,t=this.validateName();return r.a.createElement("div",null,r.a.createElement("form",{className:"addnote-form",onSubmit:function(t){return e.props.handleSubmit(t,e.state,k)}},r.a.createElement("label",{htmlFor:"folder-name-input"},"Add a Folder:"),r.a.createElement("input",{type:"text",name:"folder-name-input",id:"folder-name-input",onChange:function(t){return e.handleFolderInputChange(t.target.value)},placeholder:"Name",minLength:3,maxLength:12,required:!0}),this.state.name.touched&&r.a.createElement(g,{error:t}),r.a.createElement("button",{type:"submit"},"submit")))}}]),n}(r.a.Component);n(37).config();var S={method:"POST",headers:{"Content-Type":"application/json"},body:{}},F=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.content,o=t.folder;o.value=parseInt(o.value),S.body={name:n.value,content:r.value,folderid:o.value},S.body=JSON.stringify(S.body),fetch("".concat("http://localhost:8000","/notes"),S).then((function(e){return e.json()})).then((function(e){a.setState({name:{value:"",touched:!1},content:{value:"",touched:!1},folder:{value:0,touched:!1}})})).then((function(){window.location.href="/",window.location.reload()})).catch((function(e){return console.log(e)}))},a.validateName=function(){var e=a.state.name.value.trim();return 0===e.length?"Name is required":e.length<2?"Name must be longer than 2 characters":void 0},a.validateContent=function(){if(0===a.state.content.value.trim().length)return"A description is required"},a.validateFolder=function(){if(""===a.state.folder.value)return"A folder must be selected"},a.state={name:{value:"",touched:!1},content:{value:"",touched:!1},folder:{value:null,touched:!1}},a}return Object(i.a)(n,[{key:"updateName",value:function(e){this.setState({name:{value:e,touched:!0}})}},{key:"updateContent",value:function(e){this.setState({content:{value:e,touched:!0}})}},{key:"updateFolder",value:function(e){this.setState({folder:{value:e,touched:!0}})}},{key:"render",value:function(){var e=this,t=this.validateName(),n=this.validateContent(),a=this.validateFolder();return r.a.createElement(v.Consumer,null,(function(o){console.log(o.folders);var l=o.folders.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}));return r.a.createElement("div",null,r.a.createElement("form",{className:"addnote-form",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("fieldset",{className:"addnote-form"},r.a.createElement("legend",null,"Add a note:"),r.a.createElement("label",{htmlFor:"addnote-input-name"},"Name:"),r.a.createElement("input",{type:"text",name:"addnote-name",id:"addnote-name",onChange:function(t){return e.updateName(t.target.value)},required:!0,maxLength:12,minLength:2}),e.state.name.touched&&r.a.createElement(g,{error:t}),r.a.createElement("label",{htmlFor:"addnote-input-content"},"Content:"),r.a.createElement("input",{type:"text",name:"addnote-content",id:"addnote-content",onChange:function(t){return e.updateContent(t.target.value)},required:!0,minLength:1}),e.state.content.touched&&r.a.createElement(g,{error:n}),r.a.createElement("label",{htmlFor:"addnote-input-folder"},"Select Folder:"),r.a.createElement("select",{name:"addnote-folder",id:"addnote-folder",onChange:function(t){return e.updateFolder(t.target.value)},required:!0},r.a.createElement("option",null,"None"),l),e.state.folder.touched&&r.a.createElement(g,{error:a}),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Submit")))))}))}}]),n}(r.a.Component),I=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={hasError:!1},a}return Object(i.a)(n,[{key:"render",value:function(){return this.state.hasError?r.a.createElement("div",null,r.a.createElement("h2",null,"Items not properly sourced from server. Check that you have it set up properly.")):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(r.a.Component),w="http://localhost:8000",D=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={notes:[],folders:[]},e.deleteNoteAPIRequest=function(t,n){fetch("".concat(w,"/notes/").concat(t),{method:"DELETE",headers:{}}).then((function(e){return e.ok?e:e.json().then((function(e){throw e}))})).then((function(n){var a=e.state.notes.indexOf(e.state.notes.find((function(e){return e.id===t}))),r=e.state.notes.slice(0,a),o=e.state.notes.slice(a+1,e.state.notes.length-1);e.setState({notes:[].concat(Object(c.a)(r),Object(c.a)(o))})})).then((function(){n&&(window.location.href="/")})).catch((function(e){return console.error(e)}))},e.handleFolderSubmit=function(t,n,a){t.preventDefault();var r=n.name;a.body=JSON.stringify({name:r.value,id:O()()}),fetch("".concat(w,"/folders"),a).then((function(e){return e.json()})).then((function(t){e.setState({folders:[].concat(Object(c.a)(e.state.folders),[t])})})).catch((function(e){return console.error(e)}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(w,"/notes")).then((function(e){if(e.ok)return e.json()})).then((function(t){return e.setState({notes:t})})),fetch("".concat(w,"/folders")).then((function(e){if(e.ok)return e.json()})).then((function(t){return e.setState({folders:t})}))}},{key:"render",value:function(){var e=this,t={folders:this.state.folders,notes:this.state.notes,deleteNote:this.deleteNoteAPIRequest};return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(s.a,{path:"/",component:h})),r.a.createElement("main",null,r.a.createElement(v.Provider,{value:t},r.a.createElement("div",{className:"sidebar"},r.a.createElement(s.a,{path:"/:notes/",component:y}),r.a.createElement(s.a,{path:"/",component:p})),r.a.createElement("div",{className:"content-module"},r.a.createElement(s.c,null,r.a.createElement(I,null,r.a.createElement(s.a,{exact:!0,path:"/",component:E}),r.a.createElement(s.a,{path:"/folder/:folder_id/",render:function(e){return r.a.createElement(j,e)}}),r.a.createElement(s.a,{path:"/notes/:note_id",render:function(e){return r.a.createElement(b,e)}}),r.a.createElement(s.a,{path:"/addFolder",render:function(t){return r.a.createElement(C,Object.assign({},t,{handleSubmit:e.handleFolderSubmit}))}}),r.a.createElement(s.a,{path:"/addnote",component:F})))))))}}]),n}(r.a.Component);l.a.render(r.a.createElement(f.a,null,r.a.createElement(D,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.d880dc9b.chunk.js.map